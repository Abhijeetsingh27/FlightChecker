{"ast":null,"code":"import{useEffect,useState}from'react';import{supabase}from'../supabaseClient';export function useAuth(){const[user,setUser]=useState(undefined);// undefined = loading, null = not logged in\nuseEffect(()=>{console.log('useAuth: Setting up auth listener...');supabase.auth.getUser().then(_ref=>{let{data:{user}}=_ref;console.log('useAuth: Initial user status:',user);setUser(user);});const{data:listener}=supabase.auth.onAuthStateChange((_event,session)=>{var _session$user;console.log('useAuth: Auth state changed. Event:',_event,'Session:',session);setUser((_session$user=session===null||session===void 0?void 0:session.user)!==null&&_session$user!==void 0?_session$user:null);});return()=>{console.log('useAuth: Cleaning up auth listener.');listener.subscription.unsubscribe();};},[]);console.log('useAuth: Current user state:',user);return user;}","map":{"version":3,"names":["useEffect","useState","supabase","useAuth","user","setUser","undefined","console","log","auth","getUser","then","_ref","data","listener","onAuthStateChange","_event","session","_session$user","subscription","unsubscribe"],"sources":["C:/Users/as999/Desktop/Flight/frontend/src/hooks/useAuth.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\n\nexport function useAuth() {\n  const [user, setUser] = useState(undefined); // undefined = loading, null = not logged in\n\n  useEffect(() => {\n    console.log('useAuth: Setting up auth listener...');\n    supabase.auth.getUser().then(({ data: { user } }) => {\n      console.log('useAuth: Initial user status:', user);\n      setUser(user);\n    });\n    const { data: listener } = supabase.auth.onAuthStateChange((_event, session) => {\n      console.log('useAuth: Auth state changed. Event:', _event, 'Session:', session);\n      setUser(session?.user ?? null);\n    });\n    return () => {\n      console.log('useAuth: Cleaning up auth listener.');\n      listener.subscription.unsubscribe();\n    };\n  }, []);\n\n  console.log('useAuth: Current user state:', user);\n  return user;\n} "],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,QAAQ,KAAQ,mBAAmB,CAE5C,MAAO,SAAS,CAAAC,OAAOA,CAAA,CAAG,CACxB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGJ,QAAQ,CAACK,SAAS,CAAC,CAAE;AAE7CN,SAAS,CAAC,IAAM,CACdO,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC,CACnDN,QAAQ,CAACO,IAAI,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CAACC,IAAA,EAAwB,IAAvB,CAAEC,IAAI,CAAE,CAAET,IAAK,CAAE,CAAC,CAAAQ,IAAA,CAC9CL,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAEJ,IAAI,CAAC,CAClDC,OAAO,CAACD,IAAI,CAAC,CACf,CAAC,CAAC,CACF,KAAM,CAAES,IAAI,CAAEC,QAAS,CAAC,CAAGZ,QAAQ,CAACO,IAAI,CAACM,iBAAiB,CAAC,CAACC,MAAM,CAAEC,OAAO,GAAK,KAAAC,aAAA,CAC9EX,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAEQ,MAAM,CAAE,UAAU,CAAEC,OAAO,CAAC,CAC/EZ,OAAO,EAAAa,aAAA,CAACD,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEb,IAAI,UAAAc,aAAA,UAAAA,aAAA,CAAI,IAAI,CAAC,CAChC,CAAC,CAAC,CACF,MAAO,IAAM,CACXX,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAClDM,QAAQ,CAACK,YAAY,CAACC,WAAW,CAAC,CAAC,CACrC,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAENb,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAEJ,IAAI,CAAC,CACjD,MAAO,CAAAA,IAAI,CACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}