{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\nexport function useAuth() {\n  _s();\n  const [user, setUser] = useState(undefined); // undefined = loading, null = not logged in\n\n  useEffect(() => {\n    console.log('useAuth: Setting up auth listener...');\n    supabase.auth.getUser().then(({\n      data: {\n        user\n      }\n    }) => {\n      console.log('useAuth: Initial user status:', user);\n      setUser(user);\n    });\n    const {\n      data: listener\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      var _session$user;\n      console.log('useAuth: Auth state changed. Event:', _event, 'Session:', session);\n      setUser((_session$user = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user !== void 0 ? _session$user : null);\n    });\n    return () => {\n      console.log('useAuth: Cleaning up auth listener.');\n      listener.subscription.unsubscribe();\n    };\n  }, []);\n  console.log('useAuth: Current user state:', user);\n  return user;\n}\n_s(useAuth, \"k7s7A7S01Q+DeTLxmZ7J/UPfNsI=\");","map":{"version":3,"names":["useEffect","useState","supabase","useAuth","_s","user","setUser","undefined","console","log","auth","getUser","then","data","listener","onAuthStateChange","_event","session","_session$user","subscription","unsubscribe"],"sources":["C:/Users/as999/Desktop/Flight/frontend/src/hooks/useAuth.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\n\nexport function useAuth() {\n  const [user, setUser] = useState(undefined); // undefined = loading, null = not logged in\n\n  useEffect(() => {\n    console.log('useAuth: Setting up auth listener...');\n    supabase.auth.getUser().then(({ data: { user } }) => {\n      console.log('useAuth: Initial user status:', user);\n      setUser(user);\n    });\n    const { data: listener } = supabase.auth.onAuthStateChange((_event, session) => {\n      console.log('useAuth: Auth state changed. Event:', _event, 'Session:', session);\n      setUser(session?.user ?? null);\n    });\n    return () => {\n      console.log('useAuth: Cleaning up auth listener.');\n      listener.subscription.unsubscribe();\n    };\n  }, []);\n\n  console.log('useAuth: Current user state:', user);\n  return user;\n} "],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,QAAQ,QAAQ,mBAAmB;AAE5C,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGL,QAAQ,CAACM,SAAS,CAAC,CAAC,CAAC;;EAE7CP,SAAS,CAAC,MAAM;IACdQ,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;IACnDP,QAAQ,CAACQ,IAAI,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;MAAEC,IAAI,EAAE;QAAER;MAAK;IAAE,CAAC,KAAK;MACnDG,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEJ,IAAI,CAAC;MAClDC,OAAO,CAACD,IAAI,CAAC;IACf,CAAC,CAAC;IACF,MAAM;MAAEQ,IAAI,EAAEC;IAAS,CAAC,GAAGZ,QAAQ,CAACQ,IAAI,CAACK,iBAAiB,CAAC,CAACC,MAAM,EAAEC,OAAO,KAAK;MAAA,IAAAC,aAAA;MAC9EV,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEO,MAAM,EAAE,UAAU,EAAEC,OAAO,CAAC;MAC/EX,OAAO,EAAAY,aAAA,GAACD,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEZ,IAAI,cAAAa,aAAA,cAAAA,aAAA,GAAI,IAAI,CAAC;IAChC,CAAC,CAAC;IACF,OAAO,MAAM;MACXV,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;MAClDK,QAAQ,CAACK,YAAY,CAACC,WAAW,CAAC,CAAC;IACrC,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAENZ,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEJ,IAAI,CAAC;EACjD,OAAOA,IAAI;AACb;AAACD,EAAA,CArBeD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}