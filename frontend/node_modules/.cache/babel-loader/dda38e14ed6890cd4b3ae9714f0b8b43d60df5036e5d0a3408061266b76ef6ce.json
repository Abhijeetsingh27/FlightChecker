{"ast":null,"code":"import axios from 'axios';\nconst AMADEUS_API_URL = 'https://test.api.amadeus.com/v2';\nclass AmadeusService {\n  constructor() {\n    this.accessToken = null;\n    this.tokenExpiration = null;\n  }\n  async getAccessToken() {\n    if (this.accessToken && this.tokenExpiration > Date.now()) {\n      return this.accessToken;\n    }\n\n    // Debug logging\n    console.log('API Key:', process.env.REACT_APP_AMADEUS_API_KEY ? 'Present' : 'Missing');\n    console.log('API Secret:', process.env.REACT_APP_AMADEUS_API_SECRET ? 'Present' : 'Missing');\n    if (!process.env.REACT_APP_AMADEUS_API_KEY || !process.env.REACT_APP_AMADEUS_API_SECRET) {\n      throw new Error('Amadeus API credentials are missing. Please check your .env file.');\n    }\n    try {\n      const response = await axios.post('https://test.api.amadeus.com/v1/security/oauth2/token', new URLSearchParams({\n        'grant_type': 'client_credentials',\n        'client_id': process.env.REACT_APP_AMADEUS_API_KEY,\n        'client_secret': process.env.REACT_APP_AMADEUS_API_SECRET\n      }), {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n      this.accessToken = response.data.access_token;\n      this.tokenExpiration = Date.now() + response.data.expires_in * 1000;\n      return this.accessToken;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error_description) || error.message;\n      console.error('Error getting Amadeus access token:', errorMessage);\n      throw new Error(`Failed to authenticate with Amadeus API: ${errorMessage}`);\n    }\n  }\n  async searchFlights(originLocationCode, destinationLocationCode, departureDate, returnDate, adults = 1) {\n    try {\n      const token = await this.getAccessToken();\n      const response = await axios.get(`${AMADEUS_API_URL}/shopping/flight-offers`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        params: {\n          originLocationCode,\n          destinationLocationCode,\n          departureDate,\n          returnDate,\n          adults,\n          currencyCode: 'USD',\n          max: 10\n        }\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data, _error$response2$data2, _error$response2$data3;\n      const errorMessage = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : (_error$response2$data2 = _error$response2$data.errors) === null || _error$response2$data2 === void 0 ? void 0 : (_error$response2$data3 = _error$response2$data2[0]) === null || _error$response2$data3 === void 0 ? void 0 : _error$response2$data3.detail) || error.message;\n      console.error('Error searching flights:', errorMessage);\n      throw new Error(`Failed to search flights: ${errorMessage}`);\n    }\n  }\n  async getFlightOffersPrice(offer) {\n    try {\n      const token = await this.getAccessToken();\n      const response = await axios.post(`${AMADEUS_API_URL}/shopping/flight-offers/pricing`, {\n        data: {\n          type: 'flight-offers-pricing',\n          flightOffers: [offer]\n        }\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response3, _error$response3$data, _error$response3$data2, _error$response3$data3;\n      const errorMessage = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : (_error$response3$data2 = _error$response3$data.errors) === null || _error$response3$data2 === void 0 ? void 0 : (_error$response3$data3 = _error$response3$data2[0]) === null || _error$response3$data3 === void 0 ? void 0 : _error$response3$data3.detail) || error.message;\n      console.error('Error getting flight price:', errorMessage);\n      throw new Error(`Failed to get flight price: ${errorMessage}`);\n    }\n  }\n}\n\n// Create a single instance and export it\nconst amadeusService = new AmadeusService();\nexport default amadeusService;","map":{"version":3,"names":["axios","AMADEUS_API_URL","AmadeusService","constructor","accessToken","tokenExpiration","getAccessToken","Date","now","console","log","process","env","REACT_APP_AMADEUS_API_KEY","REACT_APP_AMADEUS_API_SECRET","Error","response","post","URLSearchParams","headers","data","access_token","expires_in","error","_error$response","_error$response$data","errorMessage","error_description","message","searchFlights","originLocationCode","destinationLocationCode","departureDate","returnDate","adults","token","get","params","currencyCode","max","_error$response2","_error$response2$data","_error$response2$data2","_error$response2$data3","errors","detail","getFlightOffersPrice","offer","type","flightOffers","_error$response3","_error$response3$data","_error$response3$data2","_error$response3$data3","amadeusService"],"sources":["C:/Users/as999/Desktop/React/Flight/frontend/src/services/amadeusService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst AMADEUS_API_URL = 'https://test.api.amadeus.com/v2';\r\n\r\nclass AmadeusService {\r\n  constructor() {\r\n    this.accessToken = null;\r\n    this.tokenExpiration = null;\r\n  }\r\n\r\n  async getAccessToken() {\r\n    if (this.accessToken && this.tokenExpiration > Date.now()) {\r\n      return this.accessToken;\r\n    }\r\n\r\n    // Debug logging\r\n    console.log('API Key:', process.env.REACT_APP_AMADEUS_API_KEY ? 'Present' : 'Missing');\r\n    console.log('API Secret:', process.env.REACT_APP_AMADEUS_API_SECRET ? 'Present' : 'Missing');\r\n\r\n    if (!process.env.REACT_APP_AMADEUS_API_KEY || !process.env.REACT_APP_AMADEUS_API_SECRET) {\r\n      throw new Error('Amadeus API credentials are missing. Please check your .env file.');\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post('https://test.api.amadeus.com/v1/security/oauth2/token', \r\n        new URLSearchParams({\r\n          'grant_type': 'client_credentials',\r\n          'client_id': process.env.REACT_APP_AMADEUS_API_KEY,\r\n          'client_secret': process.env.REACT_APP_AMADEUS_API_SECRET\r\n        }), {\r\n          headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n          }\r\n        }\r\n      );\r\n\r\n      this.accessToken = response.data.access_token;\r\n      this.tokenExpiration = Date.now() + (response.data.expires_in * 1000);\r\n      return this.accessToken;\r\n    } catch (error) {\r\n      const errorMessage = error.response?.data?.error_description || error.message;\r\n      console.error('Error getting Amadeus access token:', errorMessage);\r\n      throw new Error(`Failed to authenticate with Amadeus API: ${errorMessage}`);\r\n    }\r\n  }\r\n\r\n  async searchFlights(originLocationCode, destinationLocationCode, departureDate, returnDate, adults = 1) {\r\n    try {\r\n      const token = await this.getAccessToken();\r\n      const response = await axios.get(`${AMADEUS_API_URL}/shopping/flight-offers`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        params: {\r\n          originLocationCode,\r\n          destinationLocationCode,\r\n          departureDate,\r\n          returnDate,\r\n          adults,\r\n          currencyCode: 'USD',\r\n          max: 10\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      const errorMessage = error.response?.data?.errors?.[0]?.detail || error.message;\r\n      console.error('Error searching flights:', errorMessage);\r\n      throw new Error(`Failed to search flights: ${errorMessage}`);\r\n    }\r\n  }\r\n\r\n  async getFlightOffersPrice(offer) {\r\n    try {\r\n      const token = await this.getAccessToken();\r\n      const response = await axios.post(\r\n        `${AMADEUS_API_URL}/shopping/flight-offers/pricing`,\r\n        { data: { type: 'flight-offers-pricing', flightOffers: [offer] } },\r\n        {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      const errorMessage = error.response?.data?.errors?.[0]?.detail || error.message;\r\n      console.error('Error getting flight price:', errorMessage);\r\n      throw new Error(`Failed to get flight price: ${errorMessage}`);\r\n    }\r\n  }\r\n}\r\n\r\n// Create a single instance and export it\r\nconst amadeusService = new AmadeusService();\r\nexport default amadeusService; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}