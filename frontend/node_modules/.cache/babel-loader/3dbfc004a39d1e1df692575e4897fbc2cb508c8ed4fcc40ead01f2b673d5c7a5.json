{"ast":null,"code":"import axios from 'axios';\nconst AMADEUS_API_URL = 'https://test.api.amadeus.com/v2';\nclass AmadeusService {\n  constructor() {\n    this.accessToken = null;\n    this.tokenExpiration = null;\n  }\n  async getAccessToken() {\n    const clientId = process.env.REACT_APP_AMADEUS_CLIENT_ID;\n    const clientSecret = process.env.REACT_APP_AMADEUS_CLIENT_SECRET;\n\n    // Debug logging\n    console.log('Amadeus Client ID:', clientId ? 'Present' : 'Missing');\n    console.log('Amadeus Client Secret:', clientSecret ? 'Present' : 'Missing');\n    if (!clientId || !clientSecret) {\n      throw new Error('Amadeus API credentials are missing. Please check your .env file.');\n    }\n    if (this.accessToken && this.tokenExpiration > Date.now()) {\n      return this.accessToken;\n    }\n    try {\n      const response = await axios.post('https://test.api.amadeus.com/v1/security/oauth2/token', new URLSearchParams({\n        grant_type: 'client_credentials',\n        client_id: clientId,\n        client_secret: clientSecret\n      }), {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n      this.accessToken = response.data.access_token;\n      this.tokenExpiration = Date.now() + response.data.expires_in * 1000;\n      return this.accessToken;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error_description) || error.message;\n      console.error('Error getting Amadeus access token:', errorMessage);\n      throw new Error(`Failed to authenticate with Amadeus API: ${errorMessage}`);\n    }\n  }\n  async searchFlights(originLocationCode, destinationLocationCode, departureDate, returnDate, adults = 1, cabinClass = 'ECONOMY') {\n    try {\n      const token = await this.getAccessToken();\n      const response = await axios.get(`${AMADEUS_API_URL}/shopping/flight-offers`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        params: {\n          originLocationCode,\n          destinationLocationCode,\n          departureDate,\n          returnDate,\n          adults,\n          currencyCode: 'USD',\n          max: 10,\n          travelClass: cabinClass\n        }\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data, _error$response2$data2, _error$response2$data3;\n      const errorMessage = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : (_error$response2$data2 = _error$response2$data.errors) === null || _error$response2$data2 === void 0 ? void 0 : (_error$response2$data3 = _error$response2$data2[0]) === null || _error$response2$data3 === void 0 ? void 0 : _error$response2$data3.detail) || error.message;\n      console.error('Error searching flights:', errorMessage);\n      throw new Error(`Failed to search flights: ${errorMessage}`);\n    }\n  }\n  async getFlightOffersPrice(offer) {\n    try {\n      const token = await this.getAccessToken();\n      const response = await axios.post(`${AMADEUS_API_URL}/shopping/flight-offers/pricing`, {\n        data: {\n          type: 'flight-offers-pricing',\n          flightOffers: [offer]\n        }\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response3, _error$response3$data, _error$response3$data2, _error$response3$data3;\n      const errorMessage = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : (_error$response3$data2 = _error$response3$data.errors) === null || _error$response3$data2 === void 0 ? void 0 : (_error$response3$data3 = _error$response3$data2[0]) === null || _error$response3$data3 === void 0 ? void 0 : _error$response3$data3.detail) || error.message;\n      console.error('Error getting flight price:', errorMessage);\n      throw new Error(`Failed to get flight price: ${errorMessage}`);\n    }\n  }\n}\nconst amadeusService = new AmadeusService();\nexport default amadeusService;","map":{"version":3,"names":["axios","AMADEUS_API_URL","AmadeusService","constructor","accessToken","tokenExpiration","getAccessToken","clientId","process","env","REACT_APP_AMADEUS_CLIENT_ID","clientSecret","REACT_APP_AMADEUS_CLIENT_SECRET","console","log","Error","Date","now","response","post","URLSearchParams","grant_type","client_id","client_secret","headers","data","access_token","expires_in","error","_error$response","_error$response$data","errorMessage","error_description","message","searchFlights","originLocationCode","destinationLocationCode","departureDate","returnDate","adults","cabinClass","token","get","Authorization","params","currencyCode","max","travelClass","_error$response2","_error$response2$data","_error$response2$data2","_error$response2$data3","errors","detail","getFlightOffersPrice","offer","type","flightOffers","_error$response3","_error$response3$data","_error$response3$data2","_error$response3$data3","amadeusService"],"sources":["C:/Users/as999/Desktop/Flight/frontend/src/services/amadeusService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst AMADEUS_API_URL = 'https://test.api.amadeus.com/v2';\r\n\r\nclass AmadeusService {\r\n  constructor() {\r\n    this.accessToken = null;\r\n    this.tokenExpiration = null;\r\n  }\r\n\r\n  async getAccessToken() {\r\n    const clientId = process.env.REACT_APP_AMADEUS_CLIENT_ID;\r\n    const clientSecret = process.env.REACT_APP_AMADEUS_CLIENT_SECRET;\r\n\r\n    // Debug logging\r\n    console.log('Amadeus Client ID:', clientId ? 'Present' : 'Missing');\r\n    console.log('Amadeus Client Secret:', clientSecret ? 'Present' : 'Missing');\r\n\r\n    if (!clientId || !clientSecret) {\r\n      throw new Error('Amadeus API credentials are missing. Please check your .env file.');\r\n    }\r\n\r\n    if (this.accessToken && this.tokenExpiration > Date.now()) {\r\n      return this.accessToken;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        'https://test.api.amadeus.com/v1/security/oauth2/token',\r\n        new URLSearchParams({\r\n          grant_type: 'client_credentials',\r\n          client_id: clientId,\r\n          client_secret: clientSecret,\r\n        }),\r\n        {\r\n          headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n          },\r\n        }\r\n      );\r\n\r\n      this.accessToken = response.data.access_token;\r\n      this.tokenExpiration = Date.now() + response.data.expires_in * 1000;\r\n      return this.accessToken;\r\n    } catch (error) {\r\n      const errorMessage = error.response?.data?.error_description || error.message;\r\n      console.error('Error getting Amadeus access token:', errorMessage);\r\n      throw new Error(`Failed to authenticate with Amadeus API: ${errorMessage}`);\r\n    }\r\n  }\r\n\r\n  async searchFlights(originLocationCode, destinationLocationCode, departureDate, returnDate, adults = 1, cabinClass = 'ECONOMY') {\r\n    try {\r\n      const token = await this.getAccessToken();\r\n      const response = await axios.get(`${AMADEUS_API_URL}/shopping/flight-offers`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        params: {\r\n          originLocationCode,\r\n          destinationLocationCode,\r\n          departureDate,\r\n          returnDate,\r\n          adults,\r\n          currencyCode: 'USD',\r\n          max: 10,\r\n          travelClass: cabinClass,\r\n        },\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      const errorMessage = error.response?.data?.errors?.[0]?.detail || error.message;\r\n      console.error('Error searching flights:', errorMessage);\r\n      throw new Error(`Failed to search flights: ${errorMessage}`);\r\n    }\r\n  }\r\n\r\n  async getFlightOffersPrice(offer) {\r\n    try {\r\n      const token = await this.getAccessToken();\r\n      const response = await axios.post(\r\n        `${AMADEUS_API_URL}/shopping/flight-offers/pricing`,\r\n        { data: { type: 'flight-offers-pricing', flightOffers: [offer] } },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      const errorMessage = error.response?.data?.errors?.[0]?.detail || error.message;\r\n      console.error('Error getting flight price:', errorMessage);\r\n      throw new Error(`Failed to get flight price: ${errorMessage}`);\r\n    }\r\n  }\r\n}\r\n\r\nconst amadeusService = new AmadeusService();\r\nexport default amadeusService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}