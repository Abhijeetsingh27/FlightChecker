{"ast":null,"code":"import axios from 'axios';\nconst AMADEUS_API_URL = 'https://test.api.amadeus.com/v2';\nclass AmadeusService {\n  constructor() {\n    this.accessToken = null;\n    this.tokenExpiration = null;\n  }\n  async getAccessToken() {\n    if (this.accessToken && this.tokenExpiration > Date.now()) {\n      return this.accessToken;\n    }\n    try {\n      const response = await axios.post('https://test.api.amadeus.com/v1/security/oauth2/token', new URLSearchParams({\n        'grant_type': 'client_credentials',\n        'client_id': process.env.REACT_APP_AMADEUS_API_KEY,\n        'client_secret': process.env.REACT_APP_AMADEUS_API_SECRET\n      }), {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n      this.accessToken = response.data.access_token;\n      this.tokenExpiration = Date.now() + response.data.expires_in * 1000;\n      return this.accessToken;\n    } catch (error) {\n      console.error('Error getting Amadeus access token:', error);\n      throw error;\n    }\n  }\n  async searchFlights(originLocationCode, destinationLocationCode, departureDate, returnDate, adults = 1) {\n    try {\n      const token = await this.getAccessToken();\n      const response = await axios.get(`${AMADEUS_API_URL}/shopping/flight-offers`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        params: {\n          originLocationCode,\n          destinationLocationCode,\n          departureDate,\n          returnDate,\n          adults,\n          currencyCode: 'USD',\n          max: 10\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error searching flights:', error);\n      throw error;\n    }\n  }\n  async getFlightOffersPrice(offer) {\n    try {\n      const token = await this.getAccessToken();\n      const response = await axios.post(`${AMADEUS_API_URL}/shopping/flight-offers/pricing`, {\n        data: {\n          type: 'flight-offers-pricing',\n          flightOffers: [offer]\n        }\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error getting flight price:', error);\n      throw error;\n    }\n  }\n}\nexport default new AmadeusService();","map":{"version":3,"names":["axios","AMADEUS_API_URL","AmadeusService","constructor","accessToken","tokenExpiration","getAccessToken","Date","now","response","post","URLSearchParams","process","env","REACT_APP_AMADEUS_API_KEY","REACT_APP_AMADEUS_API_SECRET","headers","data","access_token","expires_in","error","console","searchFlights","originLocationCode","destinationLocationCode","departureDate","returnDate","adults","token","get","params","currencyCode","max","getFlightOffersPrice","offer","type","flightOffers"],"sources":["C:/Users/as999/Desktop/React/Flight/frontend/src/services/amadeusService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst AMADEUS_API_URL = 'https://test.api.amadeus.com/v2';\r\n\r\nclass AmadeusService {\r\n  constructor() {\r\n    this.accessToken = null;\r\n    this.tokenExpiration = null;\r\n  }\r\n\r\n  async getAccessToken() {\r\n    if (this.accessToken && this.tokenExpiration > Date.now()) {\r\n      return this.accessToken;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post('https://test.api.amadeus.com/v1/security/oauth2/token', \r\n        new URLSearchParams({\r\n          'grant_type': 'client_credentials',\r\n          'client_id': process.env.REACT_APP_AMADEUS_API_KEY,\r\n          'client_secret': process.env.REACT_APP_AMADEUS_API_SECRET\r\n        }), {\r\n          headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n          }\r\n        }\r\n      );\r\n\r\n      this.accessToken = response.data.access_token;\r\n      this.tokenExpiration = Date.now() + (response.data.expires_in * 1000);\r\n      return this.accessToken;\r\n    } catch (error) {\r\n      console.error('Error getting Amadeus access token:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async searchFlights(originLocationCode, destinationLocationCode, departureDate, returnDate, adults = 1) {\r\n    try {\r\n      const token = await this.getAccessToken();\r\n      const response = await axios.get(`${AMADEUS_API_URL}/shopping/flight-offers`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        params: {\r\n          originLocationCode,\r\n          destinationLocationCode,\r\n          departureDate,\r\n          returnDate,\r\n          adults,\r\n          currencyCode: 'USD',\r\n          max: 10\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error searching flights:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getFlightOffersPrice(offer) {\r\n    try {\r\n      const token = await this.getAccessToken();\r\n      const response = await axios.post(\r\n        `${AMADEUS_API_URL}/shopping/flight-offers/pricing`,\r\n        { data: { type: 'flight-offers-pricing', flightOffers: [offer] } },\r\n        {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error getting flight price:', error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new AmadeusService(); "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,eAAe,GAAG,iCAAiC;AAEzD,MAAMC,cAAc,CAAC;EACnBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,eAAe,GAAG,IAAI;EAC7B;EAEA,MAAMC,cAAcA,CAAA,EAAG;IACrB,IAAI,IAAI,CAACF,WAAW,IAAI,IAAI,CAACC,eAAe,GAAGE,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;MACzD,OAAO,IAAI,CAACJ,WAAW;IACzB;IAEA,IAAI;MACF,MAAMK,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAAC,uDAAuD,EACvF,IAAIC,eAAe,CAAC;QAClB,YAAY,EAAE,oBAAoB;QAClC,WAAW,EAAEC,OAAO,CAACC,GAAG,CAACC,yBAAyB;QAClD,eAAe,EAAEF,OAAO,CAACC,GAAG,CAACE;MAC/B,CAAC,CAAC,EAAE;QACFC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CACF,CAAC;MAED,IAAI,CAACZ,WAAW,GAAGK,QAAQ,CAACQ,IAAI,CAACC,YAAY;MAC7C,IAAI,CAACb,eAAe,GAAGE,IAAI,CAACC,GAAG,CAAC,CAAC,GAAIC,QAAQ,CAACQ,IAAI,CAACE,UAAU,GAAG,IAAK;MACrE,OAAO,IAAI,CAACf,WAAW;IACzB,CAAC,CAAC,OAAOgB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;MAC3D,MAAMA,KAAK;IACb;EACF;EAEA,MAAME,aAAaA,CAACC,kBAAkB,EAAEC,uBAAuB,EAAEC,aAAa,EAAEC,UAAU,EAAEC,MAAM,GAAG,CAAC,EAAE;IACtG,IAAI;MACF,MAAMC,KAAK,GAAG,MAAM,IAAI,CAACtB,cAAc,CAAC,CAAC;MACzC,MAAMG,QAAQ,GAAG,MAAMT,KAAK,CAAC6B,GAAG,CAAC,GAAG5B,eAAe,yBAAyB,EAAE;QAC5Ee,OAAO,EAAE;UACP,eAAe,EAAE,UAAUY,KAAK;QAClC,CAAC;QACDE,MAAM,EAAE;UACNP,kBAAkB;UAClBC,uBAAuB;UACvBC,aAAa;UACbC,UAAU;UACVC,MAAM;UACNI,YAAY,EAAE,KAAK;UACnBC,GAAG,EAAE;QACP;MACF,CAAC,CAAC;MACF,OAAOvB,QAAQ,CAACQ,IAAI;IACtB,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD,MAAMA,KAAK;IACb;EACF;EAEA,MAAMa,oBAAoBA,CAACC,KAAK,EAAE;IAChC,IAAI;MACF,MAAMN,KAAK,GAAG,MAAM,IAAI,CAACtB,cAAc,CAAC,CAAC;MACzC,MAAMG,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAI,CAC/B,GAAGT,eAAe,iCAAiC,EACnD;QAAEgB,IAAI,EAAE;UAAEkB,IAAI,EAAE,uBAAuB;UAAEC,YAAY,EAAE,CAACF,KAAK;QAAE;MAAE,CAAC,EAClE;QACElB,OAAO,EAAE;UACP,eAAe,EAAE,UAAUY,KAAK,EAAE;UAClC,cAAc,EAAE;QAClB;MACF,CACF,CAAC;MACD,OAAOnB,QAAQ,CAACQ,IAAI;IACtB,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnD,MAAMA,KAAK;IACb;EACF;AACF;AAEA,eAAe,IAAIlB,cAAc,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}